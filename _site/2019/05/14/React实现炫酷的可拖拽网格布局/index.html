<h1 id="å‰è¨€">å‰è¨€</h1>
<p>æœ€è¿‘è€æ¿è®©åšä¸€ä¸ªè‡ªå®šä¹‰é¢æ¿ï¼Œèƒ½å¤Ÿåœ¨é¢æ¿ä¸Šè‡ªç”±çš„æ‹–æ‹½ï¼Œæ–°å¢ï¼Œåˆ é™¤ç»„ä»¶ã€‚ç»„ä»¶å¯ä»¥æ˜¯å„ç§echartså›¾å½¢ï¼Œé€šè¿‡å„ä¸ªç»„ä»¶çš„æ‹–æ‹½ç»„åˆï¼Œä»è€Œè®©ç”¨æˆ·è‡ªå®šä¹‰æƒ³è¦çœ‹åˆ°çš„é¢æ¿ã€‚éœ€æ±‚å°±æ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆæ’¸èµ·è¢–å­å¼€å§‹å¹²ï¼ğŸ˜‚</p>

<h1 id="é¡¹ç›®é¢„è§ˆ">é¡¹ç›®é¢„è§ˆ</h1>
<p><a href="https://bilif.github.io/react-drag-grid/">demoåœ°å€</a>
<img src="https://user-gold-cdn.xitu.io/2019/5/14/16ab4e3123933a26?w=599&amp;h=321&amp;f=gif&amp;s=310674" alt="QQ20190514-131658-HD-compress.gif" />
ç»„ä»¶å¯ä»¥åŠ¨æ€æ·»åŠ ï¼Œåˆ é™¤ï¼Œå¯ä»¥è‡ªç”±æ‹–æ‹½ï¼Œç¼©æ”¾ã€‚å¹¶ä¸”ç¼©æ”¾åç»„ä»¶å†…éƒ¨çš„echartså›¾è¡¨ä¹Ÿä¼šè·Ÿç€ç¼©æ”¾ã€‚</p>

<h1 id="é¡¹ç›®å®æˆ˜">é¡¹ç›®å®æˆ˜</h1>
<h5 id="æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</h5>
<ol>
  <li>å‰ç«¯æ¡†æ¶ï¼š<a href="https://react.docschina.org/">React</a></li>
  <li>UIåº“ï¼š<a href="https://ant.design/index-cn">Ant Design</a></li>
  <li>è„šæ‰‹æ¶ï¼š<a href="https://github.com/facebook/create-react-app">create-react-app</a></li>
  <li>æ‹–æ‹½æ’ä»¶ï¼š<a href="https://github.com/STRML/react-grid-layout">react-grid-layout</a></li>
</ol>

<h5 id="æŠ€æœ¯å®ç°">æŠ€æœ¯å®ç°</h5>
<ol>
  <li>ä½¿ç”¨npmå®‰è£…react-grid-layoutåŒ…
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install react-grid-layout
</code></pre></div>    </div>
  </li>
  <li>åœ¨jsæ–‡ä»¶ä¸­å¼•å…¥WidthProviderå’ŒResponsiveç»„ä»¶ï¼Œå¹¶ä¸”å®ä¾‹åŒ–å“åº”å¼æ‹–æ‹½ç»„ä»¶ã€‚åœ¨cssæ–‡ä»¶ä¸­å¼•å…¥æ’ä»¶çš„æ ·å¼ã€‚
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import { WidthProvider, Responsive } from "react-grid-layout";
const ResponsiveReactGridLayout = WidthProvider(Responsive);
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@import '~react-grid-layout/css/styles.css';
@import '~react-resizable/css/styles.css';
</code></pre></div>    </div>
  </li>
  <li>åœ¨Reactçš„renderæ–¹æ³•ä¸­æ¸²æŸ“å¯æ‹–æ‹½å¸ƒå±€ã€‚ResponsiveReactGridLayoutç»„ä»¶æœ‰å¤šä¸ªå±æ€§ï¼Œè¿™é‡Œä¸¾å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„è¯´æ˜ä¸€ä¸‹ï¼š
    <ul>
      <li>colsï¼šå®šä¹‰äº†å“åº”å¼å¸ƒå±€åˆ’åˆ†æˆå‡ åˆ—ã€‚</li>
      <li>rowHeightï¼šå“åº”å¼å¸ƒå±€ä¸­ç»„ä»¶çš„è¡Œé«˜ã€‚</li>
      <li>onLayoutChangeï¼šå½“å“åº”å¼å¸ƒå±€ä¸­çš„ç»„ä»¶å‘ç”Ÿæ‹–æ‹½æˆ–è€…æ”¾å¤§ç¼©å°æ—¶è§¦å‘è¯¥å‡½æ•°ã€‚</li>
    </ul>
  </li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;ResponsiveReactGridLayout
    className="layout"
    {...this.props}
    layouts={this.state.layouts}
    onLayoutChange={(layout, layouts) =&gt;
              this.onLayoutChange(layout, layouts)
            }
   &gt;
     {this.generateDOM()}
&lt;/ResponsiveReactGridLayout&gt;
</code></pre></div></div>
<ol>
  <li>é€šè¿‡generateDOMå‡½æ•°ç”Ÿæˆå¸ƒå±€ä¸­çš„ç»„ä»¶,é¦–å…ˆå…ˆéå†ç»„ä»¶æ•°ç»„ï¼Œé€šè¿‡æ¯ä¸ªç»„ä»¶çš„ç±»å‹åˆ¤æ–­ç”Ÿäº§æŸ±çŠ¶å›¾ç»„ä»¶ï¼ŒæŠ˜çº¿ç»„ä»¶ï¼Œè¿˜æ˜¯é¥¼å›¾ç»„ä»¶ã€‚æ¯ä¸ªç»„ä»¶å¿…é¡»å®šä¹‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„keyå€¼ã€‚data-gridä¸ºæ¯ä¸€ä¸ªç»„ä»¶ç»‘å®šäº†å…¶å±æ€§ã€‚ä¸‹é¢ä¼šä»‹ç»å…·ä½“çš„data-gridå±æ€§ã€‚
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> generateDOM = () =&gt; {
 return _.map(this.state.widgets, (l, i) =&gt; {
   let option;
   if (l.type === 'bar') {
     option = getBarChart();
   }else if (l.type === 'line') {
     option = getLineChart();
   }else if (l.type === 'pie') {
     option = getPieChart();
   }
   let component = (
     &lt;ReactEcharts
       option={option}
       notMerge={true}
       lazyUpdate={true}
       style=
     /&gt;
   )
   return (
     &lt;div key={l.i} data-grid={l}&gt;
       &lt;span className='remove' onClick={this.onRemoveItem.bind(this, i)}&gt;x&lt;/span&gt;
       {component}
     &lt;/div&gt;
   );
 });
  };
</code></pre></div>    </div>
  </li>
  <li>é€šè¿‡addItemå‡½æ•°æ¥æ–°å¢ç»„ä»¶ã€‚æ¯ä¸ªç»„ä»¶å±æ€§å¦‚ä¸‹ï¼š
    <ul>
      <li>x: ç»„ä»¶åœ¨xè½´åæ ‡</li>
      <li>y: ç»„ä»¶åœ¨yè½´åæ ‡</li>
      <li>w: ç»„ä»¶å®½åº¦</li>
      <li>h: ç»„ä»¶é«˜åº¦</li>
      <li>i:  ç»„ä»¶keyå€¼
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>addItem(type,widgetId) {
 const addItem = {
 x: (this.state.widgets.length * 2) % (this.state.cols || 12),
 y: Infinity, // puts it at the bottom
 w: 2,
 h: 2,
 i: widgetId || new Date().getTime().toString(),
 };
 this.setState(
 {
   widgets: this.state.widgets.concat({
     ...addItem,
     type,
   }),
 },
 );
};
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>é€šè¿‡onRemoveItemå‡½æ•°æ¥ç§»é™¤å¢ç»„ä»¶ã€‚
```
onRemoveItem(i) {
 console.log(this.state.widgets)
 this.setState({
   widgets: this.state.widgets.filter((item,index) =&gt; index !=i)
 });</li>
</ol>

<p>}
```</p>
<h1 id="åè®°">åè®°</h1>
<p><strong>æ„Ÿè°¢æ”¯æŒã€‚è‹¥ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï¼Œå…±å‹‰ã€‚</strong></p>

<p><strong>å¦‚æœè§‰å¾—ä¸é”™ï¼Œè®°å¾— ç‚¹èµï¼Œè°¢è°¢å¤§å®¶</strong> ğŸ˜‚</p>

<p><a href="https://github.com/Bilif/react-drag-grid">æºç åœ°å€</a></p>
<blockquote>
  <p>æ¬¢è¿å…³æ³¨ æˆ‘çš„ï¼š<a href="https://bilif.github.io/">ã€Blogã€‘</a><a href="https://github.com/Bilif">ã€Githubã€‘</a><a href="https://juejin.im/user/58b5198cac502e00589a6388">ã€æ˜é‡‘ã€‘</a><a href="https://www.jianshu.com/u/94a557704b3e">ã€ç®€ä¹¦ã€‘</a></p>
</blockquote>

